<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="img/favicon.ico">
    <meta name="description" content="A bridge for Quorum used to exchange tokens">

    <title>Pons: Trading Bridge for Quorum</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/grayscale.min.css" rel="stylesheet">
    <link href="css/custome.css" rel="stylesheet">
  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Pons</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#about">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#guide">How It Works</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#balances">Check Balance</a>
            </li>

            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#swap">Swap ERC Tokens</a>
            </li>

          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead">
      <div class="container d-flex h-100 align-items-center">
        <div class="mx-auto text-center">
          <h1 class="mx-auto my-0 text-uppercase">Pons</h1>
          <h2 class="text-white-50 mx-auto mt-2 mb-5"><br><br>A cryptocurrency exchange bridge for Quorum created by students at RIT.</h2>
          <a href="#about" class="btn btn-primary js-scroll-trigger">Get Started</a>
        </div>
      </div>
    </header>

    <!-- About Section -->
    <section id="about" class="about-section text-center">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2 class="text-white mb-4">Built for Quorum</h2>
            <p> </p>
            <p class="text-white-50">Pons is a senior project created by students at RIT.
              <br>The project, created in partnership with J.P. Morgan, is centered around the exchange of ERC-20 and ERC-721 tokens on <a href="https://www.jpmorgan.com/global/Quorum">Quorum</a> blockchains.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Guide Section -->
    <section id="guide" class="projects-section bg-white" style="height: auto;">
      <div class="container">
        <div class="row align-items-center no-gutters mb-4 mb-lg-5">
          <div class="col-xl-6 col-lg-6">
            <h4>Getting Started</h4>
            <p class="text-black-50 mb-0">Understanding how the swap works.</p>
            <hr class="d-none d-lg-block mb-0 ml-0">
          </div>
        </div>
        <div>
          <p>The Pons Trading Bridge provides a solution for being able to exchange ERC20 and ERC721 tokens.
            It utilizes a bridge between two distinct blockchain tokens using the Quorum blockchain environment.
          </p>

          <p> There will be two tokens on seperate blockchains: an ERC20 "cash" token, and an ERC721 loan token. </p>

          <p> In order for this conversion to take place,
          a "bridge" between these separate blockchain implementations is developed using these two distinct smart contract protocols.
          The solution makes use of escrow contracts once both users have entered their information in the forms below.</p>

          <p> Trade assets will be stored in escrow contracts for both parties until the trade is fully completed. If either party cancels the transaction,
          the trade assets will be rightfully returned to the respective owner.</p>

          <p> Click below to see an example. </p>

          <a data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
            View Example
         </a>

         <div class="collapse" id="collapseExample" align="center">
          <div class="card card-body">
            <p> Let's start with two of our developers (Collin & Mackenzie) who wish to exchange ERC20 and ERC721 tokens.
                Mackenzie's ERC721 token in this instance is his house that he wishes to sell.
                We will be using the other 2 developers (Sadaf & Nathan) to represent the escrow wallets.
             </p>
            <img src="slide1.PNG"  class="center" width="700px" height="400px">
            <br></br>

            <p> Collin, the buyer,will be initializing the swap by filling out the swap forms (Note: This is just a rough mockup for now until or UI is completed).
            </p>
            <img src="slide2.PNG"  class="center" width="800px" height="400px">
            <br></br>

            <p> Mackenzie, the seller, will review the trade made by Collin and
              will submit his end of the trade to the escrow wallet alongside Collin's once he approves of the trade
            </p>
            <img src="slide3.PNG"  class="center" width="900px" height="400px">
            <br></br>

            <p> The trade assets are now forwarded to their respective escrow contracts until the trade is completed.
            </p>
            <img src="slide4.PNG"  class="center" width="500px" height="400px">
            <br></br>

            <p> Mackenzie and Collin both must approve the trade by releasing their trade assets from the escrow contracts to be traded using our Java implemented bridge.
            </p>
            <img src="slide5.PNG"  class="center" width="700px" height="400px">
            <br></br>

            <p> The bridge will forward the traded assets to their new owners unless the trade is cancelled.
            </p>
            <img src="slide6.PNG"  class="center" width="700px" height="400px">
            <br></br>

          </div>
        </div>

        </div>
      </div>
    </section>

    <!-- Balance Section -->
    <section id="balances" class="projects-section bg-light" style="height: auto;">
      <div class="container">
        <div class="row align-items-center no-gutters mb-4 mb-lg-5">
          <div class="col-xl-6 col-lg-6">
            <h4>Balances</h4>
            <p class="text-black-50 mb-0">Check your Quorum balance here.</p>
            <hr class="d-none d-lg-block mb-0 ml-0">
          </div>
        </div>
        <div>
          <div class="col-xl-8 col-lg-8 mx-auto">
            <div class="text-center text-lg-left">
              <form class="form-inline d-flex">
                <input  id="inputBalance" type="text" class="form-control-lg flex-fill mr-0 mr-sm-2 mb-3 mb-sm-0" onsubmit="return getBalance();" pattern="^[a-zA-Z0-9]*$" placeholder="Enter wallet address&#8230;" required maxlength="42">
                <button type="button" onclick="return getBalance();" class="btn btn-primary mx-auto">Submit</button>
              </form>
              <div id="balance"></div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <section id="swap" class="projects-section bg-white" style="top: 500px;">
      <div class="container">
        <div class="row align-items-center no-gutters mb-4 mb-lg-5">
          <div class="col-xl-6 col-lg-6">
            <h4>Pons Trading Bridge</h4>
            <p class="text-black-50 mb-0">Swap your ERC tokens with another user here. Select a token you want to exchange.</p>
            <hr class="d-none d-lg-block mb-0 ml-0">
          </div>
        </div>
        <button type="button" id="erc20Form" class="btn btn-primary mx-auto">ERC20 Transactions</button>
        <button type="button" id="erc721Form" class="btn btn-primary mx-auto">ERC721 Transactions</button>
        <div>
          <br>
          <form id ="exchangeForm20" method="POST">
            <div class="form-group">
              <label for="receiverAddress">Receiver address</label>
              <input class="form-control" id="receiverAddress" aria-describedby="emailHelp" placeholder="0xaabb">
            </div>
            <div class="form-group">
              <label for="senderAddress">Sender address</label>
              <input class="form-control" id="senderAddress" placeholder="0xbbcc">
            </div>
            <div class="form-group" type="hidden">
              <label for="sendToken">Amount to send</label>
              <input class="form-control" id="sendToken" placeholder="0xbbcc">
            </div>
            <div class="form-group" type="hidden">
              <label for="receiveToken">Amount to receive</label>
              <input class="form-control" id="receiveToken" placeholder="0xbbcc">
            </div>
            <button type="submit" class="btn btn-primary" id="submit" >Submit</button>
          </form>
        </div>
        <div>
          <form id ="exchangeForm721" method="POST">
            <div class="form-group">
              <label for="receiverAddress721">Receiver address</label>
              <input class="form-control" id="receiverAddress721" aria-describedby="emailHelp" placeholder="0xaabb">
            </div>
            <div class="form-group">
              <label for="senderAddress721">Sender address</label>
              <input class="form-control" id="senderAddress721" placeholder="0xbbcc">
            </div>
            <div class="form-group" type="hidden">
              <label for="sendToken721">Sender token ID</label>
              <input class="form-control" id="sendToken721" placeholder="0xbbcc">
            </div>
            <div class="form-group" type="hidden">
              <label for="sendTokenUnit721">Amount to send</label>
              <input class="form-control" id="sendTokenUnit721" placeholder="0xbbcc">
            </div>
            <div class="form-group" type="hidden">
              <label for="receiveToken721">Amount to receive</label>
              <input class="form-control" id="receiveToken721" placeholder="0xbbcc">
            </div>
            <button type="submit" class="btn btn-primary" id="submit" >Submit</button>
          </form>
        </div>
      </div>
    </section>

    <!-- History Section -->
    <section id="history" class="projects-section bg-light" style="height: auto;">
      <div class="container">
        <div class="row align-items-center no-gutters mb-4 mb-lg-5">
          <div class="col-xl-6 col-lg-6">
            <h4>History</h4>
            <p class="text-black-50 mb-0">View pending and previous transactions here.</p>
            <hr class="d-none d-lg-block mb-0 ml-0">
          </div>
        </div>
        <div>
          <div class="col-xl-8 col-lg-8 mx-auto">
            <div class="text-center text-lg-left">
              <form class="form-inline d-flex">
                <input  id="inputHistory" type="text" class="form-control-lg flex-fill mr-0 mr-sm-2 mb-3 mb-sm-0" onsubmit="return getHistory();" pattern="^[a-zA-Z0-9]*$" placeholder="Enter wallet address&#8230;" required maxlength="42">
                <button type="button" onclick="return getHistory();" class="btn btn-primary mx-auto">Submit</button>
              </form>
              <div id="history"></div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <!-- Footer -->
    <footer class="bg-black small text-center text-white-50">
      <div class="container">
        Pons 2019
      </div>
    </footer>

    <script>
      function getBalance() {
        var address = document.getElementById("inputBalance").value;
        if (address !== "") {
          console.log(`Getting balance for ${address}...`);

          var xhttp = new XMLHttpRequest();
          xhttp.overrideMimeType("application/json");
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              var jsonResponse = JSON.parse(this.responseText);
              let balance = jsonResponse.data;
              document.getElementById("balance").insertAdjacentHTML("afterbegin", `<div class="alert alert-success" role="alert">Balance of wallet ${address}: ${balance}</div>`);
            }
            else if (this.status !== 200) {
              console.log(`Error getting balance: ${this.responseText}`);
            }
          };
          xhttp.open("GET", `https://f111a51d.ngrok.io/erc20/balance?address=${address}`, true);
          xhttp.send();
        }
        return false;
      }
      function getHistory() {
        var address = document.getElementById("inputHistory").value;
        if (address !== "") {
          console.log(`Getting history of transactions for ${address}...`);
          /*
          var xhttp = new XMLHttpRequest();
          xhttp.overrideMimeType("application/json");
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              var jsonResponse = JSON.parse(this.responseText);
              let balance = jsonResponse.data;
              document.getElementById("balance").insertAdjacentHTML("afterbegin", `<div class="alert alert-success" role="alert">Balance of wallet ${address}: ${balance}</div>`);
            }
            else if (this.status !== 200) {
              console.log(`Error getting balance: ${this.responseText}`);
            }
          };
          xhttp.open("GET", `https://f111a51d.ngrok.io/erc20/balance?address=${address}`, true);
          xhttp.send(); */
        }
        return false;
      }
    </script>

    <!-- Bootstrap core scripts -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin script -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts -->
    <script src="js/grayscale.min.js"></script>
    <!-- back end scripts -->
    <script src="js/formProcess.js"></script>

  </body>

</html>
